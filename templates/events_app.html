<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>London Tech Events - Map & Discover</title>
    
    <!-- Leaflet Map Library -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/leaflet.min.css" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/leaflet.min.js"></script>
    
    <!-- Custom Styles -->
    <link rel="stylesheet" href="{{ url_for('static', filename='events_app.css') }}" />
</head>
<body>
    <div class="app-container">
        <!-- Header -->
        <header class="app-header">
            <div class="header-content">
                <h1 class="app-title">
                    <span class="title-icon">üöÄ</span>
                    Tech Events London
                </h1>
                <p class="header-subtitle">Discover tech meetups, workshops & conferences</p>
            </div>
            <div class="header-stats">
                <span class="event-count" id="eventCount">Loading...</span>
            </div>
        </header>

        <!-- Main App Area -->
        <main class="app-main">
            <!-- Map Container -->
            <section class="map-container">
                <div id="eventMap" class="map-wrapper"></div>
                <div class="map-loading" id="mapLoading">
                    <div class="spinner"></div>
                    <p>Loading map...</p>
                </div>
            </section>

            <!-- Events List Container -->
            <section class="events-container">
                <div class="events-header">
                    <h2>Events Near You</h2>
                    <div class="filter-tags">
                        <button class="filter-tag active" data-filter="all">All</button>
                        <button class="filter-tag" data-filter="free">Free</button>
                        <button class="filter-tag" data-filter="Hackathon">Hackathons</button>
                        <button class="filter-tag" data-filter="Workshop">Workshops</button>
                        <button class="filter-tag" data-filter="Meetup">Meetups</button>
                    </div>
                </div>

                <div class="events-list" id="eventsList">
                    <div class="events-loading">
                        <div class="spinner"></div>
                        <p>Loading events...</p>
                    </div>
                </div>
            </section>
        </main>
    </div>

    <!-- Modal Popup -->
    <div class="modal-overlay" id="modalOverlay">
        <div class="modal-content glassmorphism">
            <button class="modal-close" id="modalClose">
                <span>‚úï</span>
            </button>
            
            <div class="modal-body">
                <div class="modal-header-section">
                    <h2 id="modalTitle" class="modal-title"></h2>
                    <div class="modal-badges">
                        <span class="badge-category" id="modalCategory"></span>
                        <span class="badge-status" id="modalStatus"></span>
                    </div>
                </div>

                <div class="modal-details">
                    <div class="detail-row">
                        <span class="detail-label">üìÖ Date</span>
                        <span class="detail-value" id="modalDate"></span>
                    </div>
                    <div class="detail-row">
                        <span class="detail-label">üìç Location</span>
                        <span class="detail-value" id="modalLocation"></span>
                    </div>
                    <div class="detail-row">
                        <span class="detail-label">üè∑Ô∏è Category</span>
                        <span class="detail-value" id="modalCategoryDetail"></span>
                    </div>
                    <div class="detail-row">
                        <span class="detail-label">üìä Source</span>
                        <span class="detail-value" id="modalSource"></span>
                    </div>
                </div>

                <div class="modal-actions">
                    <a id="modalEventLink" href="#" target="_blank" rel="noopener noreferrer" class="btn btn-primary">
                        Visit Event Site
                    </a>
                    <button id="modalCloseBtn" class="btn btn-secondary">Close</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Scripts -->
    <script src="{{ url_for('static', filename='events_app.js') }}"></script>
</body>
</html>
